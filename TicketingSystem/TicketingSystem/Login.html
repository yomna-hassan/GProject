<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <!--Ticking System-->
    <form id="userdata">
    <input type="text" name="username" id="username"/><br />
    <input type="password" name="password" id="password" /><br />
    <input type="password" id="confirmpassword"><br />
    <input type="submit" id="login" value="login"/><br />
    <input type="submit" id="register" value="register" />
    </form>

    <pre id="output"></pre>
    <script src="Scripts/jquery-1.10.2.min.js"></script>
    <script src="Scripts/bootstrap.min.js"></script>
    <script >

        $(document).ready(function () {

            var response = function (object) {
                $("#output").text(JSON.stringify(object, null,4));
            };

            var gethome = function () {
                var url = "http://localhost:50941/api/home";
                $.ajax(url, {
                    type: "Get",
                    headers: getheader()

                }).always(response);
                return false;
            };


            var saveAccessToken = function (data) {
                accessToken = data.access_token;
            };
            var getheader = function () {
                if (accessToken) {
                    return { "Authorization": "Bearer" + accessToken };
                }
            }

            var register = function () {
                var url = "/api/account/register";
                var data = $("#userdata").serialize();
                $.post(url, data).always(response);
                return false;
            }

            var login = function () {
                var url = "/Token";
                var data = $("#userdata").serialize();
                data = data + "&grant_type=password";
                $.post(url, data)
                    .success(saveAccessToken)
                    .always(response)

                return false;
            }
            var accessToken = "";
            var url = "http://localhost:50941/api/home";
            $("#login").click(login);
            $("#register").click(register);


            //$("#btnlogin").click(function () {
            //    $ajax({

            //        url: '/Token',
            //        method: 'POST',
            //        contentType: 'application/json',
            //        data: {
            //            username: $("#username").val(),
            //            password: $("#password").val()
            //        },
            //        grant_type: 'password',
            //        success: function () {
            //            saveAccessToken();
            //            aler(data);
            //        },
            //        error: function (e) {
            //            alert(response);
            //        }
                    
                    


                //})
            })
       
    </script>

</body>

</html>